# La Suite Meet - Configuration Principale
# Copiez ce fichier vers .env.common et remplissez les valeurs

# === DOMAINES ===
MEET_HOST=meet.domain.tld
KEYCLOAK_HOST=id.domain.tld
LIVEKIT_HOST=livekit.domain.tld
BACKEND_INTERNAL_HOST=backend
FRONTEND_INTERNAL_HOST=frontend
LIVEKIT_INTERNAL_HOST=livekit
REALM_NAME=meet

# === DJANGO ===
DJANGO_ALLOWED_HOSTS=${MEET_HOST}
# Générer avec: python3 -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
DJANGO_SECRET_KEY=CHANGEME_GENERATE_SECURE_KEY
DJANGO_SETTINGS_MODULE=meet.settings
DJANGO_CONFIGURATION=Production

# Python
PYTHONPATH=/app

# === BACKEND URL ===
MEET_BASE_URL=https://${MEET_HOST}

# === SMTP / EMAIL ===
DJANGO_EMAIL_HOST=smtp.example.com
DJANGO_EMAIL_HOST_USER=noreply@example.com
DJANGO_EMAIL_HOST_PASSWORD=CHANGEME_SMTP_PASSWORD
DJANGO_EMAIL_PORT=587
DJANGO_EMAIL_FROM=noreply@example.com
DJANGO_EMAIL_USE_TLS=true
# DJANGO_EMAIL_USE_SSL=false

DJANGO_EMAIL_BRAND_NAME=La Suite Numérique
DJANGO_EMAIL_LOGO_IMG=https://${MEET_HOST}/assets/logo-suite-numerique.png

# === OIDC (Keycloak ou autre provider) ===
OIDC_OP_JWKS_ENDPOINT=https://${KEYCLOAK_HOST}/realms/${REALM_NAME}/protocol/openid-connect/certs
OIDC_OP_AUTHORIZATION_ENDPOINT=https://${KEYCLOAK_HOST}/realms/${REALM_NAME}/protocol/openid-connect/auth
OIDC_OP_TOKEN_ENDPOINT=https://${KEYCLOAK_HOST}/realms/${REALM_NAME}/protocol/openid-connect/token
OIDC_OP_USER_ENDPOINT=https://${KEYCLOAK_HOST}/realms/${REALM_NAME}/protocol/openid-connect/userinfo
OIDC_OP_LOGOUT_ENDPOINT=https://${KEYCLOAK_HOST}/realms/${REALM_NAME}/protocol/openid-connect/logout

OIDC_RP_CLIENT_ID=meet
# Secret à récupérer depuis Keycloak
OIDC_RP_CLIENT_SECRET=CHANGEME_CLIENT_SECRET
OIDC_RP_SIGN_ALGO=RS256
OIDC_RP_SCOPES=openid email

LOGIN_REDIRECT_URL=https://${MEET_HOST}
LOGIN_REDIRECT_URL_FAILURE=https://${MEET_HOST}
LOGOUT_REDIRECT_URL=https://${MEET_HOST}

OIDC_REDIRECT_ALLOWED_HOSTS=["https://${MEET_HOST}"]

# === LIVEKIT ===
# Générer avec: openssl rand -base64 32
LIVEKIT_API_SECRET=CHANGEME_GENERATE_SECURE_KEY
LIVEKIT_API_KEY=meet
LIVEKIT_API_URL=https://${LIVEKIT_HOST}
ALLOW_UNREGISTERED_ROOMS=false

# === REDIS ===
REDIS_URL=redis://redis:6379/0

# === DOCKER USER (optionnel) ===
DOCKER_USER=1000
